# プロジェクト管理ルール

## 1. プロジェクト構造

```
D:\Project\{プロジェクト名}\
├── ai-shared-context\        # AI共有コンテキスト (全プロジェクト共通参照)
│   ├── history\              # AI対話履歴
│   ├── summaries\            # 作業サマリー
│   └── knowledge-base\       # 共有ナレッジ
├── docs-shared\              # プロジェクトドキュメント
└── {プロジェクトコード}\    # 実装コード
```

## 2. 作業記録ルール

### 2.1 セッション開始時
1. 前回のサマリーを確認
2. 未完了タスクを特定
3. TodoListを更新

### 2.2 作業中
- 重要な決定事項を記録
- エラーと解決策を文書化
- 進捗をTodoListで管理

### 2.3 セッション終了時 (「まとめ」指示)
以下の形式でサマリーを作成：

```markdown
# 作業サマリー YYYY-MM-DD HH:MM

## 完了事項
- [x] 完了したタスク1
- [x] 完了したタスク2

## 未完了事項
- [ ] 未完了タスク1 (理由: XXX)
- [ ] ブロック事項

## 次回優先タスク
1. タスク1
2. タスク2

## 重要な決定事項
- 決定内容

## 発生した問題と解決策
- 問題: XXX
- 解決: YYY

## 環境情報
- プロジェクトパス: 
- ブランチ: 
- 最終コミット: 
```

## 3. AI対話履歴管理

### 3.1 履歴ファイル命名規則
```
history-YYYY-MM-DD-HH-MM-SS.md
```
- 日付と時刻で区別
- 同じフォルダ内に日付順で保存
- 例: `history-2025-10-24-14-30-45.md`

### 3.2 サマリーファイル命名規則
```
summary-YYYY-MM-DD-HH-MM-SS.md
```
- 日付と時刻で区別
- 同じフォルダ内に日付順で保存
- 例: `summary-2025-10-24-18-00-00.md`

### 3.3 履歴フォーマット
```markdown
# AI対話履歴

**日時**: YYYY-MM-DD HH:MM:SS
**プロジェクト**: プロジェクト名
**セッションID**: UUID

## コンテキスト
- 目的: 
- 前回からの継続事項:

## 対話ログ
### Human: 
{ユーザーメッセージ}

### Assistant:
{AIレスポンス}

## 実行されたアクション
- ファイル編集: [ファイルパス]
- コマンド実行: [コマンド]
- テスト結果: [結果]
```

## 4. プロジェクト間共有

### 4.1 共有フォルダ構造
```
D:\Project\ai-shared-context\    # グローバル共有フォルダ
├── project-registry.json        # プロジェクト一覧
├── global-rules\                # 共通ルール
├── templates\                   # テンプレート集
└── cross-project-knowledge\     # プロジェクト横断ナレッジ
```

### 4.2 プロジェクト登録
各プロジェクトは`project-registry.json`に登録：
```json
{
  "projects": [
    {
      "id": "2510_obsidianGit",
      "path": "D:\\Project\\2510_obsidianGit",
      "description": "Obsidian Git管理プラグイン",
      "created": "2024-10-22",
      "status": "active"
    }
  ]
}
```

## 5. 継続性の確保

### 5.1 再開時の手順
1. 最新のサマリーファイルを読み込む
2. 未完了タスクをTodoListに復元
3. ブロック事項を確認
4. 作業を継続

### 5.2 引き継ぎ情報
必須記録項目：
- Git status
- 実行中のプロセス
- 環境変数
- 依存関係の状態

## 6. コマンドとトリガー

### 6.1 管理コマンド
- `まとめ`: セッションサマリー作成
- `履歴確認`: 過去の対話履歴表示
- `タスク確認`: 現在のTodoList表示
- `引き継ぎ`: 次セッション用情報作成

### 6.2 自動記録トリガー
- ファイル作成/編集時
- エラー発生時
- テスト実行時
- コミット時

## 7. 品質管理

### 7.1 レビューチェックリスト
- [ ] コードレビュー完了
- [ ] テスト実行成功
- [ ] ドキュメント更新
- [ ] 履歴記録完了

### 7.2 完了基準
- すべてのテストがパス
- カバレッジ目標達成
- ドキュメント最新化
- 履歴記録完備

## 8. エラー処理

### 8.1 エラー記録
```markdown
## エラーログ
**発生日時**: YYYY-MM-DD HH:MM
**エラー種別**: [Type]
**影響範囲**: [Scope]
**詳細**: 
**対処法**: 
**状態**: [解決済/未解決]
```

## 9. セキュリティ

### 9.1 機密情報の扱い
- APIキーは環境変数で管理
- パスワードは記録しない
- 個人情報はマスキング

## 10. バックアップ

### 10.1 バックアップ対象
- ai-shared-context/
- 作業サマリー
- プロジェクト設定

### 10.2 バックアップ頻度
- 日次: 自動バックアップ
- セッション毎: サマリー保存