# テスト環境ガイド

## 概要
このプロジェクトには安全なテスト環境が設定されています。本番データに影響を与えることなくObsidianプラグインをテストできます。

## テスト環境の構成

### ディレクトリ構造
```
test-vault/                    # テスト用Obsidian書庫
├── .obsidian/                 # Obsidian設定ディレクトリ
│   ├── plugins/               # プラグインディレクトリ
│   │   └── obsidian-multi-git-plugin/  # 開発中のプラグイン
│   ├── app.json               # アプリ設定（Safe Mode無効）
│   ├── community-plugins.json # 有効化プラグイン一覧
│   ├── core-plugins.json      # コアプラグイン設定
│   ├── hotkeys.json           # テスト用ホットキー
│   └── workspace.json         # ワークスペース設定
├── README-TESTING.md          # テスト書庫の説明
├── test-note-1.md             # テスト用ファイル1
└── test-folder/               # テスト用サブフォルダ
    └── test-note-2.md         # テスト用ファイル2
```

### 自動セットアップスクリプト
```
scripts/
├── setup-test-env.bat         # Windows用セットアップ
└── setup-test-env.sh          # Linux/Mac用セットアップ
```

## テスト手順

### 1. 初回セットアップ
```bash
# Windows
scripts\setup-test-env.bat

# Linux/Mac
./scripts/setup-test-env.sh
```

### 2. Obsidianでテスト書庫を開く
1. Obsidianを起動
2. 「書庫を開く」→ `test-vault` フォルダを選択
3. Safe Modeが無効になっていることを確認
4. プラグインが有効化されていることを確認

### 3. プラグインの動作テスト
- **基本機能**: テストノートを編集してGit操作をテスト
- **ホットキー**: Ctrl+G でプラグインコマンドを実行
- **UI要素**: プラグインのメニューやボタンの動作確認
- **エラーハンドリング**: 意図的にエラーを発生させて対応確認

### 4. 開発サイクル
1. プラグインコードを修正
2. `npm run build` でビルド
3. セットアップスクリプトでテスト環境に配置
4. Obsidianでプラグインをリロード（無効→有効）
5. テスト実行

## 安全性について

### ✅ 安全な点
- テスト専用の書庫で本番データと完全分離
- テストファイルは削除・変更されても問題なし
- プラグインのデバッグ情報を安全に確認可能

### ⚠️ 注意点
- テスト書庫には重要なデータを保存しない
- プラグインがファイルシステムにアクセスする可能性
- Git操作のテスト時は適切なリポジトリ設定を使用

## トラブルシューティング

### プラグインが認識されない
1. `manifest.json` の内容を確認
2. プラグインIDが正しいことを確認
3. Obsidianを再起動

### ファイルが更新されない
1. セットアップスクリプトを再実行
2. プラグインの無効化→有効化
3. Obsidian Developer Toolsでエラーログを確認（Ctrl+Shift+I）

### Git操作のテスト
✅ **テスト書庫のGitリポジトリ設定済み**
- リモートリポジトリ: `git@192.168.68.72:futaro/obsidiantest.git`
- SSH設定: プロジェクトと同じ `futaro` アカウント使用
- .gitignore: Obsidianプラグイン開発用に最適化済み

**Git操作テスト手順:**
1. テストノートを編集
2. プラグインのGit機能でステータス確認
3. コミット・プッシュ機能をテスト
4. 履歴表示機能をテスト

## 継続的テスト

### 自動化可能な項目
- ビルドプロセスの検証
- プラグインファイルの配置確認
- 基本的な読み込みテスト

### 手動テストが必要な項目
- UI/UXの動作確認
- Obsidian API との連携
- パフォーマンステスト
- エラーハンドリング